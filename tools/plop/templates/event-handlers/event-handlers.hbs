import type { Cradle } from "@fastify/awilix";

import type { {{pascalCase (singular name)}} } from "./{{kebabCase name}}.contracts.ts";
import { {{upperSnakeCase (singular name)}}_EVENTS } from "./{{kebabCase name}}.events.ts";

export default function setup{{pascalCase name}}EventHandlers({ eventBus, logger }: Cradle): void {
  // eslint-disable-next-line @typescript-eslint/require-await
  eventBus.on({{upperSnakeCase (singular name)}}_EVENTS.CREATED, async (payload: {{pascalCase (singular name)}}): Promise<void> => {
    logger.info(`[{{pascalCase name}}EventHandlers] {{pascalCase (singular name)}} created: ${payload.id}`);
  });

  // eslint-disable-next-line @typescript-eslint/require-await
  eventBus.on({{upperSnakeCase (singular name)}}_EVENTS.UPDATED, async (payload: {{pascalCase (singular name)}}): Promise<void> => {
    logger.info(`[{{pascalCase name}}EventHandlers] {{pascalCase (singular name)}} updated: ${payload.id}`);
  });

  // eslint-disable-next-line @typescript-eslint/require-await
  eventBus.on({{upperSnakeCase (singular name)}}_EVENTS.DELETED, async (payload: {{pascalCase (singular name)}}): Promise<void> => {
    logger.info(`[{{pascalCase name}}EventHandlers] {{pascalCase (singular name)}} deleted: ${payload.id}`);
  });
}
